{% extends "base.html" %}
{% block title %}Case Details{% endblock %}
{% block body_class %}case-details{% endblock %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/case.css') }}">
{% endblock %}

{% block content %}

<!-- =========================
     Case Header
========================= -->
<div class="case-header">
  <div class="header-left">
    <h2>{{ case.DeepBlueRef }} â€” {{ case.VesselName }}</h2>
    <div class="case-pills">
      <span class="info-pill">Voyage: {{ case.VoyageNumber }}</span>
      <span class="info-pill">CP Date: {{ case.CPDate }}</span>
      <span class="info-pill">Charterer: {{ case.CharterersName }}</span>
    </div>
  </div>

  <div class="header-right">
    <a id="backToLedger"
       href="{{ url_for('ledger_bp.ledger_page') }}"
       class="header-btn">
      <i class="fas fa-arrow-left"></i>
      <span>Back to Ledger</span>
    </a>

    <button class="header-btn" id="editBtn" title="Edit">
      <i class="fas fa-pen"></i>
    </button>

    <button class="header-btn" title="Export">
      <i class="fas fa-file-export"></i>
    </button>

    <button class="header-btn danger" id="deleteCaseBtn" title="Delete Case">
      <i class="fas fa-trash"></i>
    </button>
  </div>
</div>

<!-- =========================
     Metadata-driven Case Body
========================= -->
<div class="case-detail-container" data-case-id="{{ case.CaseID }}">
  <div id="case-meta-content"></div>

  <!-- Save notification (used by unified case.js) -->
  <div id="saveNotification" class="save-notification hidden"></div>
</div>

<script src="{{ url_for('static', filename='js/case.js') }}"></script>
{% endblock %}